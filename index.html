

<style>
  :root {
    --parblue: #002366;
    --pargreen: #7ff5bc;
    --parwhite: #ffffff;
  }

  body {
    background: rgb(223, 221, 221);
  }

  form {
    width: 75%;
    color: var(--parblue);
    font-family: "Catamaran", "roboto";
  }


  h1#head {
    text-align: center;
    color: var(--parblue);
    /* text-shadow: var(--pargreen) 1px 2px 5px; */
    font-weight: 700;
    margin-top: 30px !important;
    font-family: "Catamaran", "roboto";
  }

  section h3 {
    padding-bottom: 0px  !important;
    margin-bottom: 0px  !important;
    margin-top: 5px  !important;
    font-weight: 400  !important;
  }

  #fundcalc {
    background: var(--parwhite);
    padding: 15px 10px;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
  }

  section {
    display: flex;
    flex-direction: column;
    margin: 10px;
  }

  .sections {
    background: whitesmoke;
    border-radius: 5px;
    padding: 15px 5px;

  }
  .calcinput{
    margin: 0 auto !important;
  }
  .calcbtn{
      color: var(--parblue) !important;
      width: 40% !important;
  }
  #paymentsection {
    background: var(--pargreen);
  }
  input[type=text],  input[type=number] {
    width: 50%;
    padding: 10px;
    border: none;
    border-radius: 5px;
    font-size: 2em;
    font-weight: 600;
    text-align: center;
    font-family: "Helvetica", "Arial", "sans-serif";
    color: #777 !important;
    pointer-events: none;
    -moz-appearance:textfield;
  }
  input[type=text]:disabled, input[type=number] {
    background: var(--parwhite);
  }

  input[name=pay] {
    border-color: var(--parblue);
    border-style: groove;
    border-radius: 5px;
    width: 50%;
    padding: 10px;

  }

  .units {
    margin: 0;
    margin-bottom: 5px;
    padding: 0;
    padding-bottom: 5px;
    font-size: 15px;
    text-decoration: none;
    text-decoration-line: none;
  }

  [type=range] {
    -webkit-appearance: none;
    background: transparent;
    margin: 12px 0;
    width: 90%;
    cursor: pointer;
  }

  [type=range]::-moz-focus-outer {
    border: 0;
  }

  [type=range]:focus {
    outline: 0;
  }

  [type=range]:focus::-webkit-slider-runnable-track {
    background: var(--parblue);
    border: 1px outset var(--pargreen);
  }

  [type=range]:focus::-ms-fill-lower {
    background: var(--parblue);
    border: 1px outset var(--pargreen);
  }

  [type=range]:focus::-ms-fill-upper {
    background: var(--parblue);
    border: 1px outset var(--pargreen);
  }

  [type=range]::-webkit-slider-runnable-track {
    cursor: pointer;
    height: 8px;
    transition: all .2s ease;
    width: 100%;
    box-shadow: 1px 1px 1px rgba(0, 0, 0, .2), 0 0 1px rgba(13, 13, 13, .2);
    background: var(--parblue);
    border: 1px solid #cfd8dc;
    border-radius: 5px;
  }

  [type=range]::-webkit-slider-thumb {
    box-shadow: 4px 4px 4px rgba(0, 0, 0, .2), 0 0 4px rgba(13, 13, 13, .2);
    background: var(--pargreen);
    border: 1px outset #eceff1;
    border-radius: 12px;
    cursor: default;
    height: 24px;
    width: 24px;
    -webkit-appearance: none;
    margin-top: -10px;
  }

  [type=range]::-moz-range-track {
    box-shadow: 1px 1px 1px rgba(0, 0, 0, .2), 0 0 1px rgba(13, 13, 13, .2);
    cursor: default;
    height: 8px;
    transition: all .2s ease;
    width: 100%;
    background: var(--parblue);
    border: 2px solid #cfd8dc;
    border-radius: 5px;
    height: 4px;
  }

  [type=range]::-moz-range-thumb {
    box-shadow: 4px 4px 4px rgba(0, 0, 0, .2), 0 0 4px rgba(13, 13, 13, .2);
    background: var(--pargreen);
    border: 2px solid #eceff1;
    border-radius: 12px;
    cursor: default;
    height: 20px;
    width: 20px;
  }

  [type=range]::-ms-track {
    cursor: default;
    height: 8px;
    transition: all .2s ease;
    width: 100%;
    background: transparent;
    border-color: transparent;
    border-width: 12px 0;
    color: transparent;
  }

  [type=range]::-ms-fill-lower {
    box-shadow: 1px 1px 1px rgba(0, 0, 0, .2), 0 0 1px rgba(13, 13, 13, .2);
    background: var(--parblue);
    border: 2px solid #cfd8dc;
    border-radius: 10px;
  }

  [type=range]::-ms-fill-upper {
    box-shadow: 1px 1px 1px rgba(0, 0, 0, .2), 0 0 1px rgba(13, 13, 13, .2);
    background: var(--parblue);
    border: 2px solid #cfd8dc;
    border-radius: 10px;
  }

  [type=range]::-ms-thumb {
    box-shadow: 4px 4px 4px rgba(0, 0, 0, .2), 0 0 4px rgba(13, 13, 13, .2);
    background: var(--pargreen);
    border: 2px solid #eceff1;
    border-radius: 12px;
    cursor: default;
    height: 20px;
    width: 20px;
    margin-top: 2px
  }

  [type=range]:disabled::-webkit-slider-thumb {
    cursor: not-allowed
  }

  [type=range]:disabled::-moz-range-thumb {
    cursor: not-allowed
  }

  [type=range]:disabled::-ms-thumb {
    cursor: not-allowed
  }

  [type=range]:disabled::-webkit-slider-runnable-track {
    cursor: not-allowed
  }

  [type=range]:disabled::-ms-fill-lower {
    cursor: not-allowed
  }

  [type=range]:disabled::-ms-fill-upper {
    cursor: not-allowed
  }

  @media (max-width: 800px) {
    input[type=text],  input[type=number] {

      font-size: 1em;

    }
  }
</style>

<body>

  <h1 id="head">Funding Calculator</h1>
  <center>
    <form id="fundcalc" name=calc method=POST>
      <div>
        <section class="sections">

          <h3>Funding Amount
          </h3>
<p class="units" >($USD)</p>
          <input id="princFund" class="calcinput" type=number name=funding size=5 value="200000">

          <input class="scrollfund calcinput" type=range name=scrollfunding step="10000" min="10000" max="1000000" value="200000">
        </section>


        <section class="sections">
          <h3>Term
          </h3>
          <p class="units">(Days)</p>
          <input id="term" class="calcinput" type=number name=days size=5 value='120'>
          <input class="scrollterm calcinput" type=range name=scrolldays size=10 value='120' min="120" step="1" max="356">
        </section>


        <!-- Interest Rate is fixed and should not be visible to the user, if you want to change it dynamically please uncomment below code and referece the element in the JavaScript variable "intr" below -->
        <!-- <tr>
          <td bgcolor="#eeeee"> Rate (%)</td>
          <td bgcolor="#aaeeaa" align=right><input type=text name=rate size=10 value="1.25" ></td>
        </tr> -->

        <section class="sections" id="paymentsection">
          <h3>Payment Amount
          </h3>
<p class="units">($USD)</p>
          <input class="calcinput" type=text name=pay size=5 disabled>

        </section>

      </div>
    </form>

  </center>
  <script language="JavaScript">

    //slider inputs for funding and term
    var fundInputs = document.querySelectorAll('.scrollfund');
    var termInputs = document.querySelectorAll('.scrollterm');

    //text input for funding or term
    var fundVisual = document.getElementById('princFund');  //funding amount that teh user sees
    var termVisual = document.getElementById('term');

    //function for updating fund amt via slider input
    function handleFundUpdate() {
      fundVisual.setAttribute('value', this.value);
      // console.log(this.value, this.name, 'here is the value');
      showpay()
    }

    //function for updating term length via slider input
    function handleTermUpdate() {
      termVisual.setAttribute('value', this.value);
      // console.log(this.value, this.name, 'here is the value');
      showpay()
    }

    function handlePaymentAmount(){

    }
    //eventListeners for the term and funding inputs
    fundInputs.forEach(input => input.addEventListener('change', handleFundUpdate));
    termInputs.forEach(input => input.addEventListener('change', handleTermUpdate));
    // fundInputs.forEach(input => input.addEventListener('mouseover', handleUpdate));

    function showpay() {
      if ((document.calc.funding.value == null || document.calc.funding.value.length == 0) ||
        (document.calc.days.value == null || document.calc.days.value.length == 0)
        // ||
        // (document.calc.rate.value == null || document.calc.rate.value.length == 0)
      ) {
        document.calc.pay.value = "Incomplete data";
      }
      else {
        var princ = document.calc.funding.value; // principle funding amount
        var term = document.calc.days.value; //Term in days
        var intr = 1.25; //Interest RATE FIXED
        var rtr = princ * intr;// Repayment Track Record
        const calculatedPayment = rtr / term;
        const feePortion = calculatedPayment * (1 - (1 / intr));
        const princPortion = calculatedPayment - feePortion;
        document.calc.pay.value = Math.round((calculatedPayment)*100)/100;
        if (calculatedPayment != 0) {
          console.log('fee portion', feePortion);
          console.log('principle portion', princPortion);
          console.log(intr, 'Fixed Rate')
        }
      }
      // payment = principle * monthly interest/(1 - (1/(1+MonthlyInterest)*Months))
    }
        //
    window.onload = function(evt){
      showpay()
    }
  </script>
</body>

</html>
